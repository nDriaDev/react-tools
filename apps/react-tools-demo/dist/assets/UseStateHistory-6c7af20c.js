import{r as c,j as n}from"./index-5abb0461.js";const g=(p,i="no-limit")=>{const[d,s]=c.useState(p),[,o]=c.useState(0),t=c.useRef([d]),h=c.useRef(i==="no-limit"?1/0:i),e=c.useRef(0),l=c.useRef(!0),b=c.useCallback(r=>l.current=r,[]),y=c.useCallback(r=>{const u=r instanceof Function?r(t.current[e.current]):r;t.current=t.current.slice(0,e.current+1),!l.current&&t.current.pop(),t.current.push(u),t.current.length>h.current?t.current.shift():l.current&&e.current++,s(u),o(C=>C+1)},[h]),a=c.useCallback(()=>{e.current!==0&&(e.current--,s(t.current[e.current]),o(r=>r+1))},[]),j=c.useCallback(()=>{e.current!==t.current.length-1&&(e.current++,s(t.current[e.current]),o(r=>r+1))},[]),m=c.useCallback(r=>{r<0||r>t.current.length-1||(e.current=r,s(t.current[e.current]),o(u=>u+1))},[]),x=c.useCallback(r=>{const u=r||t.current[e.current];t.current=[u],e.current=0,s(t.current[e.current]),o(C=>C+1)},[]),f=e.current>0,k=e.current<t.current.length-1;return[d,y,{history:Object.seal([...t.current]),presentPointer:e.current,trackUpdate:b,canUndo:f,canRedo:k,undo:a,redo:j,go:m,clear:x}]};function S(){const[p,i,{go:d,presentPointer:s,history:o,trackUpdate:t,canRedo:h,canUndo:e,redo:l,undo:b,clear:y}]=g(0,10);return n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:["Count is ",p]}),n.jsxs("p",{children:["Current pointer is ",s]}),n.jsxs("p",{children:["History is ",JSON.stringify(o)]}),n.jsxs("div",{style:{gridTemplateColumns:"auto auto auto",justifyContent:"center",display:"grid",gap:"5px"},children:[n.jsx("button",{onClick:()=>i(a=>a+1),children:"increment"}),n.jsx("button",{onClick:()=>i(a=>(t(!1),a+1)),children:"disableHistory and increment"}),n.jsx("button",{onClick:()=>t(!1),children:"disable history"}),n.jsx("button",{onClick:()=>t(!0),children:"enable history"}),n.jsx("button",{onClick:()=>y(),children:"Clear"}),n.jsx("button",{onClick:b,disabled:!e,children:"Undo"}),n.jsx("button",{onClick:l,disabled:!h,children:"Redo"}),n.jsxs("button",{onClick:()=>d(+document.querySelector("#go").value),children:["Go",n.jsx("input",{type:"number",id:"go",style:{marginLeft:35,maxWidth:40}})]})]})]})}S.displayName="UseStateHistory";export{S as UseStateHistory};
