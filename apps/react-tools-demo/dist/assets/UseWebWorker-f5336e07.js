import{r,j as u}from"./index-712b8b73.js";import{u as d}from"./useEffectOnce-561f9f95.js";const b=({url:s,options:l,onMessage:c,onError:o,onMessageError:a})=>{const e=r.useRef(),g=r.useCallback((n,t)=>{var i,m;Array.isArray(t)?(i=e.current)==null||i.postMessage(n,t):(m=e.current)==null||m.postMessage(n,t)},[]),p=r.useCallback(()=>{var n;(n=e.current)==null||n.terminate(),e.current=void 0},[]);return d(()=>{const n=s instanceof URL?s:new URL(s,import.meta.url);return e.current=new Worker(n,l),e.current.onerror=t=>{o&&o(t)},e.current.onmessageerror=t=>{a&&a(t)},e.current.onmessage=t=>{c&&c(t)},()=>{var t;(t=e.current)==null||t.terminate(),e.current=void 0}}),{send:g,terminate:p}},w=()=>{const[s,l]=r.useState(Date.now()),[c,o]=r.useState(""),{send:a}=b({url:new URL("data:video/mp2t;base64,ZnVuY3Rpb24gaGVhdnlUYXNrKCkgewoJY29uc3QgbnVtYmVyczogbnVtYmVyW10gPSBBcnJheSg1NV8wMDBfMDAwKS5maWxsKHRydWUpLm1hcCgoKSA9PiBNYXRoLnJhbmRvbSgpICogMTEpCglyZXR1cm4gbnVtYmVycy5zbGljZSgwLCA1KS5tYXAoZWwgPT4gTWF0aC5mbG9vcihlbCkpCn0KCnNlbGYub25tZXNzYWdlID0gKCkgPT4gewoJY29uc3QgcmVzID0gaGVhdnlUYXNrKCk7CglzZWxmLnBvc3RNZXNzYWdlKHsgcmVzIH0pOwp9Cg==",self.location),onMessage:r.useCallback(e=>{o(e.data.res.join(","))},[])});return r.useEffect(()=>{const e=setInterval(()=>l(Date.now()),1);return()=>clearInterval(e)},[]),u.jsxs("div",{children:[u.jsxs("p",{children:["Timestamp: ",s]}),u.jsxs("p",{children:["Result: ",c||""]}),u.jsx("button",{onClick:()=>{o("Pending..."),a("heavyTask")},children:"START"})]})};export{w as UseWebWorker};
