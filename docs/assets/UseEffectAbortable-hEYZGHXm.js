import{r as a,j as e}from"./index-27nyValZ.js";import{S as l}from"./Show-CoElSnT4.js";const u=(s,r)=>{a.useEffect(()=>{const n=new AbortController,t=s(n.signal);return()=>{n.abort(),t instanceof Promise?t.then(o=>{typeof o=="function"&&o()}):typeof t=="function"&&t()}},r)},f=({setDate:s})=>{const[r,n]=a.useState("IDLE");return u(t=>{let o=setTimeout(()=>{n("LOADING")},1e3),c=setTimeout(()=>{n("SUCCESS"),s(i=>i+1)},5e3);t.addEventListener("abort",()=>{clearTimeout(o),clearTimeout(c)})},[]),e.jsx("p",{children:r})},m=()=>{const[s,r]=a.useState(!1),[n,t]=a.useState(0);return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Current state: ",s?"MOUNT":"UNMOUNT"]}),e.jsxs("p",{children:["Current data: ",n]}),e.jsx("button",{onClick:()=>r(o=>!o),children:s?"Unmount":"Mount"}),e.jsx(l,{when:s,children:e.jsx(f,{setDate:t})})]})};m.displayName="UseEffectAbortable";export{m as UseEffectAbortable};
