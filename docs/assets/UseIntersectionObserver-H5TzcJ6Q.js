import{r as c,j as u}from"./index-7iLlK_Uu.js";import{u as f}from"./useEffectOnce-TlMyHqBR.js";const a=(n,o)=>{const r=c.useRef(),s=c.useRef(!0),t=c.useRef(),i=c.useRef(n);return f(()=>()=>{var e;t.current=void 0,(e=r.current)==null||e.disconnect(),r.current=void 0}),[c.useCallback(e=>{var l;!s.current||!e||(e&&(!t.current||t.current!==e)&&(t.current=e,r.current=new IntersectionObserver(n,o),r.current.observe(e)),i.current!==n&&r.current&&e&&(i.current=n,(l=r.current)==null||l.disconnect(),r.current=void 0,r.current=new IntersectionObserver(n,o),r.current.observe(e)))},[n,o]),c.useCallback(()=>{s.current&&(s.current=!1,r.current&&t.current&&r.current.unobserve(t.current))},[]),c.useCallback(()=>{var e;s.current||(s.current=!0,r.current&&t.current&&((e=r.current)==null||e.observe(t.current)))},[])]},x=()=>{const[n,o]=c.useState(!1),[r,s,t]=a(i=>{const e=i[0].isIntersecting;e!==n&&o(e)});return u.jsxs("div",{children:[u.jsx("p",{children:"Is intersected: "+n}),u.jsx("div",{style:{position:"relative",width:"fit-contenr",height:200,border:"1px solid lightblue",overflow:"auto"},children:u.jsx("textarea",{ref:r,style:{position:"absolute",top:400},rows:3})}),u.jsx("br",{}),u.jsx("button",{onClick:t,children:"Reconnect"}),u.jsx("button",{onClick:s,children:"Disconnect"})]})};export{x as UseIntersectionObserver};
