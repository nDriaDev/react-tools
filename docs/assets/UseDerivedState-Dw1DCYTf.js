import{r as l,j as e}from"./index-7iLlK_Uu.js";const x=(t,s)=>{if(Object.is(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;const n=Reflect.ownKeys(t),r=Reflect.ownKeys(s);if(n.length!==r.length)return!1;for(let a=0,c=n.length;a<c;a++){const o=n[a];if(!Reflect.has(s,o)||!Object.is(t[o],s[o]))return!1}return!0},h=(t,s,n)=>{const[,r]=l.useReducer(i=>i+1e-6,0),a=l.useRef({localState:typeof t=="function"?t():t,deps:s});let c;x(a.current.deps,s)?c=a.current.localState:(c=typeof t=="function"?t():t,a.current={localState:c,deps:s},r());const o=l.useCallback(i=>{const f=typeof i=="function"?i(a.current.localState):i;a.current.localState=f,r()},[]);return l.useEffect(()=>{let i;return n&&(i=n()),()=>i&&i()},[n]),[c,o]},u=t=>{const s=["Keith Allison","Ora Nelson","Thomas Chavez","Claudia Wheeler","Iva Gibson","Jose Daniel","Mattie Greer","Belle Schultz","Milton Weber","Olive Rivera","Patrick Caldwell","Adeline Wheeler","Arthur Russell","Anthony Hogan","Rodney Munoz","Ricky Woods","Sean Stone","Leona Leonard","Brent Turner","Cecelia Parks"];return new Promise(n=>setTimeout(n,2e3)).then(()=>s.filter(n=>n.toLowerCase().includes(t.toLowerCase())))},d={1:0,2:0,3:0},S=()=>{const[t,s]=l.useState(""),[n,r]=l.useState(""),[a,c]=l.useState("");return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto auto",justifyContent:"center",gap:50,maxHeight:350,overflow:"auto"},children:[e.jsxs("div",{children:[e.jsx("p",{children:"Without useDerivedState"}),e.jsx("input",{type:"text",placeholder:"User..",value:n,onChange:o=>r(o.target.value)}),e.jsx(g,{user:n})]}),e.jsxs("div",{children:[e.jsx("p",{children:"With useDerivedState"}),e.jsx("input",{type:"text",placeholder:"User..",value:t,onChange:o=>s(o.target.value)}),e.jsx(j,{user:t})]}),e.jsxs("div",{children:[e.jsx("p",{children:"With useDerivedState and compute"}),e.jsx("input",{type:"text",placeholder:"User..",value:a,onChange:o=>c(o.target.value)}),e.jsx(p,{user:a})]})]})},g=l.memo(({user:t})=>{d[1]++;const[s,n]=l.useState({loading:!0,friends:[]});return l.useEffect(()=>{n({loading:!0,friends:[]}),u(t).then(r=>n({loading:!1,friends:r}))},[t]),e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["User: ",t]}),e.jsxs("h3",{children:["Renders: ",d[1]]}),s.loading?"Loading...":e.jsx("ul",{children:s.friends.map(r=>e.jsx("li",{children:r},r))})]})}),p=l.memo(({user:t})=>{d[2]++;const[s,n]=h({loading:!0,friends:[]},[t],()=>{s.loading&&u(t).then(r=>{n({loading:!1,friends:r})})});return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["User: ",t]}),e.jsxs("h3",{children:["Renders: ",d[2]]}),s.loading?"Loading...":e.jsx("ul",{children:s.friends.map(r=>e.jsx("li",{children:r},r))})]})}),j=l.memo(({user:t})=>{d[3]++;const[s,n]=h({loading:!0,friends:[]},[t]);return l.useEffect(()=>{u(t).then(r=>{n({loading:!1,friends:r})})},[n,t]),e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["User: ",t]}),e.jsxs("h3",{children:["Renders: ",d[3]]}),s.loading?"Loading...":e.jsx("ul",{children:s.friends.map(r=>e.jsx("li",{children:r},r))})]})});export{S as UseDerivedState};
