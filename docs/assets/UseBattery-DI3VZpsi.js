import{r as s,j as u}from"./index-27nyValZ.js";import{u as m}from"./useSyncExternalStore-Atv6g5DE.js";const h=new Set,l={onCharging:new Set,onChargingTime:new Set,onDischargingTime:new Set,onLevel:new Set};let c;const o=n=>{const i=s.useRef({isSupported:!!navigator&&"getBattery"in navigator,charging:!1,chargingTime:0,dischargingTime:0,level:0});return m(s.useCallback(r=>(h.add(r),h.size===1&&navigator&&"getBattery"in navigator&&navigator.getBattery().then(e=>{c=e,i.current={isSupported:!0,level:e.level,charging:e.charging,chargingTime:e.chargingTime,dischargingTime:e.dischargingTime},h.forEach(a=>a()),e.onchargingchange=a=>{i.current={isSupported:!0,level:e.level,charging:e.charging,chargingTime:e.chargingTime,dischargingTime:e.dischargingTime},l.onCharging.forEach(g=>g(a)),h.forEach(g=>g())},e.onchargingtimechange=a=>{i.current={isSupported:!0,level:e.level,charging:e.charging,chargingTime:e.chargingTime,dischargingTime:e.dischargingTime},l.onChargingTime.forEach(g=>g(a)),h.forEach(g=>g())},e.ondischargingtimechange=a=>{i.current={isSupported:!0,level:e.level,charging:e.charging,chargingTime:e.chargingTime,dischargingTime:e.dischargingTime},l.onDischargingTime.forEach(g=>g(a)),h.forEach(g=>g())},e.onlevelchange=a=>{i.current={isSupported:!0,level:e.level,charging:e.charging,chargingTime:e.chargingTime,dischargingTime:e.dischargingTime},l.onLevel.forEach(g=>g(a)),h.forEach(g=>g())}}),()=>{h.delete(r),h.size===0&&(c&&(c.onchargingchange=null),c&&(c.onchargingtimechange=null),c&&(c.ondischargingtimechange=null),c&&(c.onlevelchange=null),c=void 0)}),[n==null?void 0:n.onChargingChange,n==null?void 0:n.onChargingTimeChange,n==null?void 0:n.onDischargingTimeChange,n==null?void 0:n.onLevelChange]),s.useMemo(()=>{let r={...i.current};return()=>((i.current.isSupported!==r.isSupported||i.current.level!==r.level||i.current.charging!==r.charging||i.current.chargingTime!==r.chargingTime||i.current.dischargingTime!==r.dischargingTime)&&(r=i.current),r)},[]))},t=()=>{const n=o();return u.jsx("div",{style:{textAlign:"center"},children:Object.keys(n).map(i=>u.jsxs("p",{children:[i,": ",i==="isSupported"?n.isSupported?"Yes":"No":n[i]]},i))})};export{t as UseBattery};
