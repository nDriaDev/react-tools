import{r as o,j as i}from"./index-27nyValZ.js";import{u as S}from"./useSyncExternalStore-Atv6g5DE.js";const u=new Set,g=a=>{const e=o.useRef(),l=o.useRef(!1),d=S(o.useCallback(r=>{const n=()=>{console.log("orientation"),l.current=!0,u.forEach(t=>t())};u.add(r);let c=!1;return u.size===1&&(screen.orientation.onchange=n,window&&"getScreenDetails"in window&&(c=!0,window.getScreenDetails().then(t=>{c&&(t.addEventListener("currentscreenchange",n),t.addEventListener("screenschange",n),e.current=t,r())}).catch(()=>{}))),()=>{u.delete(r),u.size===0&&(e.current&&(e.current.removeEventListener("currentscreenchange",n),e.current.removeEventListener("screenschange",n)),c=!1,screen.orientation.onchange=null)}},[a]),o.useMemo(()=>{let r={currentScreen:{availHeight:screen.availWidth,availWidth:screen.availWidth,height:screen.height,width:screen.width,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,orientation:{angle:screen.orientation.angle,type:screen.orientation.type},availLeft:void 0,availTop:void 0,left:void 0,top:void 0,devicePixelRatio:void 0,isInternal:void 0,isPrimary:void 0,label:void 0},screens:void 0};return()=>{var t,v;const n=Reflect.ownKeys(r.currentScreen);r.currentScreen.isPrimary===void 0&&e.current&&(r={currentScreen:{...r.currentScreen,availLeft:e.current.currentScreen.availLeft,availTop:e.current.currentScreen.availTop,left:e.current.currentScreen.left,top:e.current.currentScreen.top,devicePixelRatio:e.current.currentScreen.devicePixelRatio,isInternal:e.current.currentScreen.isInternal,isPrimary:e.current.currentScreen.isPrimary,label:e.current.currentScreen.label},screens:(t=e.current)!=null&&t.screens?e.current.screens:void 0});let c=!1;if(l.current){l.current=!1;for(let s=0,f=n.length;s<f;s++)if(n[s]==="orientation"?(r.currentScreen.orientation.angle!==screen.orientation.angle||r.currentScreen.orientation.type!==screen.orientation.type)&&(c=!0):n[s]in screen&&r.currentScreen[n[s]]!==screen[n[s]]&&(c=!0),c){r={currentScreen:{availHeight:screen.availWidth,availWidth:screen.availWidth,height:screen.height,width:screen.width,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,orientation:{angle:screen.orientation.angle,type:screen.orientation.type},availLeft:e.current?e.current.currentScreen.availLeft:void 0,availTop:e.current?e.current.currentScreen.availTop:void 0,left:e.current?e.current.currentScreen.left:void 0,top:e.current?e.current.currentScreen.top:void 0,devicePixelRatio:e.current?e.current.currentScreen.devicePixelRatio:void 0,isInternal:e.current?e.current.currentScreen.isInternal:void 0,isPrimary:e.current?e.current.currentScreen.isPrimary:void 0,label:e.current?e.current.currentScreen.label:void 0},screens:(v=e.current)!=null&&v.screens?e.current.screens:void 0};break}}return r}},[a])),h=o.useRef(r=>screen.orientation.lock(r)),p=o.useRef(()=>screen.orientation.unlock());return[d,h.current,p.current]},m=()=>{var e;const[a]=g(!0);return i.jsxs("div",{style:{textAlign:"left",padding:"0 1em",maxHeight:300,overflow:"auto",border:"1px solid lightgray"},children:[i.jsx("p",{children:i.jsx("strong",{children:"Current screen:"})}),i.jsx("pre",{children:JSON.stringify(a.currentScreen,null,2)}),i.jsx("p",{children:i.jsx("strong",{children:"Screens:"})}),(e=a.screens)==null?void 0:e.map((l,d)=>i.jsx("pre",{children:l.label},d))]})};export{m as UseScreen};
