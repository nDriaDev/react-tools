import{r as e,j as l}from"./index-27nyValZ.js";import{u as h}from"./useSyncExternalStore-Atv6g5DE.js";function f({defaultValue:c,getter:a,setter:t,returnValue:k}){const n=e.useRef(e.useMemo(()=>{let r=a?a():null;return r||(r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",t&&t(r)),r},[])),u=e.useRef(n.current),s=e.useRef(),o=e.useCallback(r=>{n.current=r,t&&t(n.current),s.current&&s.current()},[t]);return[h(e.useCallback(r=>{s.current=r;const i=window.matchMedia("(prefers-color-scheme: dark)"),m=d=>{o(d.matches?"dark":"light")};return i.addEventListener("change",m,{passive:!0}),()=>{i.removeEventListener("change",m),s.current=null}},[c,o]),e.useCallback(()=>(n.current!==u.current&&(u.current=n.current),u.current),[])),o]}const v=()=>{const[c,a]=f({defaultValue:"mediaQuery",returnValue:!0,getter:e.useCallback(()=>sessionStorage.getItem("color-scheme"),[]),setter:e.useCallback(t=>sessionStorage.setItem("color-scheme",t),[])});return l.jsxs("div",{className:"container-themed","data-color":c,children:[l.jsxs("p",{children:["Current color-scheme is: ",c]}),l.jsx("button",{onClick:()=>a(c==="dark"?"light":"dark"),children:"Change color"})]})};export{v as UseColorScheme};
