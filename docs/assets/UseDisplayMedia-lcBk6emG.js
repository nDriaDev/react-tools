import{r as s,j as u}from"./index-l4CN14w3.js";import{u as i}from"./useMediaDevices-VNs1B_nM.js";import{u as l}from"./useSyncExternalStore-L9x8hRZ1.js";import"./useEffectOnce-AqrC0xIh.js";const p=()=>{const c=i("DisplayCapture"),t=s.useRef(),r=s.useRef(),n=s.useCallback(e=>c(e).then(a=>{t.current=a,r.current&&r.current()}),[c]),o=s.useCallback(()=>{t.current&&(t.current.getTracks().forEach(a=>a.stop()),t.current=void 0,r.current&&r.current())},[]);return[l(s.useCallback(e=>(r.current=e,()=>{r.current=void 0}),[]),s.useMemo(()=>{let e={current:void 0};return()=>(e.current!==t.current&&(e={current:t.current}),e.current)},[])),n,o]},h=()=>{const[c,t,r]=p(),n=s.useRef(null),o=async()=>{await t()};return n.current&&(c?n.current.srcObject=c:n.current.srcObject=null),u.jsxs("div",{style:{display:"grid",gridTemplateRows:"auto auto auto",justifyContent:"center",gap:20,maxHeight:350,overflow:"auto"},children:[u.jsx("button",{onClick:o,children:"Start"}),u.jsx("button",{onClick:r,children:"Stop"}),u.jsx("video",{autoPlay:!0,width:300,height:200,ref:n})]})};export{h as UseDisplayMedia};
