import{r as u,j as h}from"./index-vpxvYiBV.js";import{u as x}from"./useEventListener-fT8bqR5j.js";import"./useMemoizedFn-mCfFDcI4.js";const w=r=>r.nativeEvent?window.TouchEvent?r.nativeEvent instanceof TouchEvent:"touches"in r.nativeEvent:r instanceof TouchEvent,P=({target:r,onSwipeStart:y,onSwipe:d,onSwipeEnd:a,options:t})=>{const g=u.useRef((e,s)=>Math.max(Math.abs(e),Math.abs(s))>=((t==null?void 0:t.threshold)??0)),n=u.useRef(),f=u.useRef((e,s)=>g.current(e,s)?Math.abs(e)>Math.abs(s)?e>0?"right":"left":s>0?"down":"up":"none"),v=u.useRef(!1),c=u.useRef({target:{x:0,y:0},start:{x:0,y:0},end:{x:0,y:0}}),m=x({type:["mousedown","touchstart"],element:r,listener:u.useCallback(e=>{var E;v.current=!0,n.current=e.target,e.target&&e.target.style.setProperty("touch-action","none"),e.target&&e.target.style.setProperty("-webkit-user-select","none"),e.target&&e.target.style.setProperty("-ms-user-select","none"),e.target&&e.target.style.setProperty("user-select","none");const{x:s,y:l}=((E=e.target)==null?void 0:E.getBoundingClientRect())??{x:0,y:0},{clientX:o,clientY:i}=w(e)?e.touches[0]:e;c.current={target:{x:s,y:l},start:{x:o,y:i},end:{x:o,y:i}},y&&y(e)},[y]),listenerOpts:{capture:!0,passive:(t==null?void 0:t.passive)!==void 0?t.passive:!0}}),p=x({type:["mousemove","touchmove"],element:window,listener:u.useCallback(e=>{const{clientX:s,clientY:l}=w(e)?e.touches[0]:e;c.current.end={x:s,y:l};const o=c.current.end.x-c.current.start.x,i=c.current.end.y-c.current.start.y;v.current&&g.current(o,i)&&d&&d(e,f.current(o,i),{x:o,y:i})},[d]),listenerOpts:{capture:!0,passive:(t==null?void 0:t.passive)!==void 0?t.passive:!0}}),b=x({type:["mouseup","mouseleave","touchend","touchcancel"],element:window,listener:u.useCallback(e=>{const s=c.current.end.x-c.current.start.x,l=c.current.end.y-c.current.start.y;v.current&&a&&a(e,f.current(s,l),{x:s,y:l}),v.current=!1,n.current&&n.current.style.removeProperty("touch-action"),n.current&&n.current.style.removeProperty("-webkit-user-select"),n.current&&n.current.style.removeProperty("-ms-user-select"),n.current&&n.current.style.removeProperty("user-select"),n.current=null},[a]),listenerOpts:{capture:!0,passive:(t==null?void 0:t.passive)!==void 0?t.passive:!0}});return u.useCallback(()=>{m(),p(),b()},[m,p,b])},M=()=>{const r=u.useRef(null);P({target:r,onSwipe(d,a,t){console.log(a),t.x>=0&&(r.current.style.left=t.x+"px")},onSwipeEnd(d,a,t){r.current.style.left=`${t.x>330?"400":"0"}px`}});const y=()=>{r.current.style.left="0"};return h.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:400,height:100,border:"1px solid lightgray",overflow:"hidden",margin:"0 auto"},children:[h.jsx("button",{onClick:y,children:"RESET"}),h.jsx("div",{ref:r,style:{position:"absolute",backgroundColor:"rgb(73 84 104)",zIndex:100,inset:0},children:h.jsx("p",{children:"SWIPE"})})]})};export{M as UseSwipe};
