import{r,j as l}from"./index-75043133.js";import{u as p}from"./useSyncExternalStore-4a64d9ce.js";function f({defaultValue:e,getter:s,setter:c,returnValue:h}){const n=r.useRef(r.useMemo(()=>{let t=s?s():null;return t||(t=e==="mediaQuery"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e,c&&c(t)),t},[])),u=r.useRef(n.current),o=r.useRef(),a=r.useCallback(t=>{n.current=t,c&&c(n.current),o.current&&o.current()},[c]),d=p(r.useCallback(t=>{o.current=t;const i=window.matchMedia("(prefers-color-scheme: dark)"),m=k=>{a(k.matches?"dark":"light")};return e==="mediaQuery"&&i.addEventListener("change",m,{passive:!0}),()=>{e==="mediaQuery"&&i.removeEventListener("change",m),o.current=null}},[e,a]),r.useCallback(()=>(n.current!==u.current&&(u.current=n.current),u.current),[]));return h?[d,a]:a}const v=()=>{const[e,s]=f({defaultValue:"mediaQuery",returnValue:!0,getter:r.useCallback(()=>sessionStorage.getItem("color-scheme"),[]),setter:r.useCallback(c=>sessionStorage.setItem("color-scheme",c),[])});return l.jsxs("div",{className:"container-themed","data-color":e,children:[l.jsxs("p",{children:["Current color-scheme is: ",e]}),l.jsx("button",{onClick:()=>s(e==="dark"?"light":"dark"),children:"Change color"})]})};export{v as UseColorScheme};
