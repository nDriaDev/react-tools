import{r as s}from"./index-7iLlK_Uu.js";import{u as d}from"./useSyncExternalStore-wXtEJDrd.js";const r=new Set,i=()=>r.forEach(e=>e()),c=()=>{const e=Reflect.get(navigator,"connection"),n={isSupported:!!e,isOnline:navigator.onLine};return e&&(n.isSupported=!0,n.downlink=e.downlink,n.downlinkMax=e.downlinkMax,n.effectiveType=e.effectiveType,n.rtt=e.rtt,n.saveData=e.saveData,n.type=e.type),n};function v(e){const n=s.useRef(e??["isSupported","isOnline","since","downlink","downlinkMax","effectiveType","rtt","saveData","type"]);return d(s.useCallback(o=>{const t=Reflect.get(navigator,"connection");return r.size===0&&(window.addEventListener("online",i,{passive:!0}),window.addEventListener("offline",i,{passive:!0}),t&&t.addEventListener("change",i)),r.add(o),()=>{r.delete(i),r.size===0&&(window.removeEventListener("online",i),window.removeEventListener("offline",i),t&&t.removeEventListener("change",i))}},[]),s.useMemo(()=>{let o=c();return()=>{const t=c();for(const a of n.current)if(t[a]!==o[a]){o={...t,...o.isOnline!==t.isOnline&&{since:new Date().getTime()}};break}return o}},[]))}export{v as u};
