import{r as t,j as r}from"./index-27nyValZ.js";import{u as f}from"./useSyncExternalStore-Atv6g5DE.js";const m=(n,u,s)=>{const a=t.useRef(),c=t.useRef(),o=t.useRef(),l=t.useCallback(e=>{c.current=e.data,a.current&&a.current()},[u]),d=t.useCallback(e=>{o.current&&o.current.postMessage(e)},[]),i=f(t.useCallback(e=>(a.current=e,()=>a.current=void 0),[]),t.useMemo(()=>{let e=c.current;return()=>(e!==c.current&&(e=c.current),e)},[]));return t.useLayoutEffect(()=>{o.current=new BroadcastChannel(n),o.current.onmessage=l},[n,l,s]),[i,d]},h=()=>{const[n,u]=m("react-tools");return r.jsxs("div",{children:[r.jsx("h2",{children:"Open page on multiple tab to see how hook work"}),r.jsxs("p",{children:["State: ",n]}),r.jsxs("form",{onSubmit:s=>{s.preventDefault(),u(s.target.elements.namedItem("text").value)},children:[r.jsx("input",{name:"text",type:"text"}),r.jsx("button",{type:"submit",children:"SEND"})]})]})};export{h as UseBroadcastChannel};
