import{r as m,j as d}from"./index-pQr8QGpH.js";import{u as T}from"./useRaf-Z4M-Sr2P.js";import{u as v}from"./useEffectOnce-IJUgqoRT.js";const h=({everySeconds:s,windowSize:f}={windowSize:10,everySeconds:.5})=>{const[o,i]=m.useState({fps:[],avg:0,maxFps:0,currentFps:0}),r=m.useRef({started:!1,ratings:[],frames:0,startTime:performance.now(),lastTime:0,fps:[],avg:0,maxFps:0,currentFps:0,calc:(p,x)=>{if(r.current.frames++,r.current.lastTime=p,r.current.lastTime>r.current.startTime+s*1e3){const g=r.current.lastTime-r.current.startTime;let t=Math.round(1e3/(g/r.current.frames)),e=[...r.current.fps,t];e=e.slice(Math.max(r.current.fps.length-f,0));const n=+(e.reduce((a,u)=>a+u,0)/e.length).toFixed(2),c=Math.max(t,r.current.maxFps);t=e[e.length-1],(e.some((a,u)=>r.current.fps[u]!==a)||n!==r.current.avg||c!==r.current.maxFps||t!==r.current.currentFps)&&(r.current.fps=e,r.current.currentFps=t,r.current.avg=n,r.current.maxFps=c,i({fps:e,currentFps:t,maxFps:c,avg:n})),r.current.startTime=p,r.current.frames=0}x()}}),[F,l]=T(r.current.calc);return r.current.started||(r.current.started=!0,F()),v(()=>()=>l()),o},j=()=>{const s=h();return d.jsxs("p",{children:["FPS: ",s.currentFps," - avg: ",s.avg," - Max FPS: ",s.maxFps]})};export{j as UseFPS};
