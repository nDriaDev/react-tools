import{r as m,j as d}from"./index-e6x_fAxq.js";import{u}from"./useSyncExternalStore-_eoHdgVy.js";const l=new Set,r={onCharging:new Set,onChargingTime:new Set,onDischargingTime:new Set,onLevel:new Set};let h;const T=e=>{const g=m.useRef({isSupported:!!navigator&&"getBattery"in navigator,charging:!1,chargingTime:0,dischargingTime:0,level:0});return u(m.useCallback(a=>(l.add(a),l.size===1&&navigator&&"getBattery"in navigator&&navigator.getBattery().then(n=>{h=n,g.current={isSupported:!0,level:n.level,charging:n.charging,chargingTime:n.chargingTime,dischargingTime:n.dischargingTime},l.forEach(c=>c()),e!=null&&e.onChargingChange&&r.onCharging.add(e.onChargingChange),e!=null&&e.onChargingTimeChange&&r.onChargingTime.add(e.onChargingTimeChange),e!=null&&e.onDischargingTimeChange&&r.onDischargingTime.add(e.onDischargingTimeChange),e!=null&&e.onLevelChange&&r.onLevel.add(e.onLevelChange),n.onchargingchange=c=>{g.current={isSupported:!0,level:n.level,charging:n.charging,chargingTime:n.chargingTime,dischargingTime:n.dischargingTime},r.onCharging.forEach(i=>i(c)),l.forEach(i=>i())},n.onchargingtimechange=c=>{g.current={isSupported:!0,level:n.level,charging:n.charging,chargingTime:n.chargingTime,dischargingTime:n.dischargingTime},r.onChargingTime.forEach(i=>i(c)),l.forEach(i=>i())},n.ondischargingtimechange=c=>{g.current={isSupported:!0,level:n.level,charging:n.charging,chargingTime:n.chargingTime,dischargingTime:n.dischargingTime},r.onDischargingTime.forEach(i=>i(c)),l.forEach(i=>i())},n.onlevelchange=c=>{g.current={isSupported:!0,level:n.level,charging:n.charging,chargingTime:n.chargingTime,dischargingTime:n.dischargingTime},r.onLevel.forEach(i=>i(c)),l.forEach(i=>i())}}),()=>{e!=null&&e.onChargingChange&&r.onCharging.delete(e.onChargingChange),e!=null&&e.onChargingTimeChange&&r.onChargingTime.delete(e.onChargingTimeChange),e!=null&&e.onDischargingTimeChange&&r.onDischargingTime.delete(e.onDischargingTimeChange),e!=null&&e.onLevelChange&&r.onLevel.delete(e.onLevelChange),l.delete(a),l.size===0&&(h&&(h.onchargingchange=null),h&&(h.onchargingtimechange=null),h&&(h.ondischargingtimechange=null),h&&(h.onlevelchange=null),h=void 0)}),[e==null?void 0:e.onChargingChange,e==null?void 0:e.onChargingTimeChange,e==null?void 0:e.onDischargingTimeChange,e==null?void 0:e.onLevelChange]),m.useMemo(()=>{let a={...g.current};return()=>((g.current.isSupported!==a.isSupported||g.current.level!==a.level||g.current.charging!==a.charging||g.current.chargingTime!==a.chargingTime||g.current.dischargingTime!==a.dischargingTime)&&(a=g.current),a)},[]))},S=()=>{const e=T();return d.jsx("div",{style:{textAlign:"center"},children:Object.keys(e).map(g=>d.jsxs("p",{children:[g,": ",e[g]]},g))})};export{S as UseBattery};
