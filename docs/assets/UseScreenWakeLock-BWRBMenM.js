import{r as c,j as s}from"./index-27nyValZ.js";import{u as k}from"./useSyncExternalStore-Atv6g5DE.js";const v=t=>{const e=c.useRef(),r=c.useRef(),a=c.useRef(n=>{t(n),e.current&&e.current()}),l=c.useRef(async()=>{navigator&&"wakeLock"in navigator&&(r.current=await navigator.wakeLock.request("screen"),e.current&&e.current())}),p=c.useRef(async()=>{r.current&&(await r.current.release(),r.current.removeEventListener("release",a.current),r.current=void 0,e.current&&e.current())});return[k(c.useCallback(n=>(e.current=n,()=>{e.current=void 0}),[]),c.useMemo(()=>{let n={isSupported:!!navigator&&"wakeLock"in navigator,type:null,isActive:null};return()=>{const u=!!navigator&&"wakeLock"in navigator;let o=null,i=null;return r.current&&(o=r.current.type,i=!r.current.released),(u!==n.isSupported||o!==n.type||i!==n.isActive)&&(n={isSupported:u,type:o,isActive:i}),n}},[])),l.current,p.current]},y=()=>{const[t,e,r]=v();return s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:["WakeLock API supported: ",t.isSupported?"Yes":"No"]}),s.jsxs("p",{children:["WakeLock type: ",t.type?t.type:"WakeLock not found."]}),s.jsxs("p",{children:["WakeLock active: ",t.isActive?"Yes":"No"]}),s.jsx("button",{type:"button",onClick:()=>{t.isActive?r():e()},disabled:!t.isSupported,children:t.isActive?"UnLock":"Lock"})]})};export{y as UseScreenWakeLock};
