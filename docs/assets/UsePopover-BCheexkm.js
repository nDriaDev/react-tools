const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-27nyValZ.js","assets/index-BrxZsJl5.css"])))=>i.map(i=>d[i]);
import{_ as x,r,j as s}from"./index-27nyValZ.js";import{u as C}from"./useLazyRef-DflU3bRA.js";import{u as L}from"./useMergedRef-DrdT5pgy.js";import{u as R}from"./useSyncExternalStore-Atv6g5DE.js";let h;(async()=>{try{const t=await x(()=>import("./index-27nyValZ.js").then(n=>n.R),__vite__mapDeps([0,1]));h=t==null?void 0:t.useId}catch{h=void 0}})();let j=0;const k=()=>`:${(j++).toString(32)}:`;function _(){return C(k).current}const S=h??_;function I({mode:t,onBeforeToggle:n,onToggle:c}){const a="showPopover"in document.body,l=S(),v=r.useRef(!1),p=r.useRef(),u=r.useCallback(e=>{n&&n(e)},[n]),i=r.useCallback(e=>{console.log("onToggle"),v.current=e.newState==="open",c&&c(e),p.current&&p.current()},[c]),m=r.useCallback(e=>{e&&(e.removeEventListener("beforetoggle",u),e.removeEventListener("toggle",i),e.addEventListener("beforetoggle",u),e.addEventListener("toggle",i))},[u,i]),o=r.useRef(null),f=L(o,m),P=r.useMemo(()=>({children:e,...d})=>"showPopover"in document.body&&s.jsx("div",{id:l,ref:f,popover:t,...d,children:e}),[l,t,f]),b=R(r.useCallback(e=>(p.current=e,()=>{p.current=void 0}),[]),r.useCallback(()=>v.current,[])),y=r.useCallback(()=>{"showPopover"in document.body&&o.current&&o.current.showPopover()},[]),E=r.useCallback(()=>{"showPopover"in document.body&&o.current&&o.current.hidePopover()},[]),w=r.useCallback(()=>{"showPopover"in document.body&&o.current&&o.current.togglePopover()},[]);return o.current&&setTimeout(()=>{var e;o.current&&(o.current.removeEventListener("beforetoggle",u),o.current.removeEventListener("toggle",i),v.current&&((e=o.current)==null||e.showPopover()),setTimeout(()=>{var d,g;(d=o.current)==null||d.addEventListener("beforetoggle",u),(g=o.current)==null||g.addEventListener("toggle",i)},1))},1),{isSupported:a,isOpen:b,showPopover:y,hidePopover:E,togglePopover:w,Popover:P}}const A=()=>{const{Popover:t,isSupported:n,isOpen:c,showPopover:a}=I({mode:"auto"}),l=r.useMemo(()=>({width:300,height:200,position:"absolute"}),[]);return s.jsxs("div",{children:[s.jsxs("p",{children:["Is supported: ",n?"Yes":"No"]}),s.jsx("button",{onClick:a,disabled:c,children:"Open Popover"}),s.jsxs(t,{style:l,children:[s.jsx("h2",{children:"Popover heading"}),s.jsx("p",{children:"Popover content"})]})]})};export{A as UsePopover};
