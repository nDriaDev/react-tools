var l=t=>{throw TypeError(t)};var a=(t,s,e)=>s.has(t)||l("Cannot "+e);var h=(t,s,e)=>(a(t,s,"read from private field"),e?e.call(t):s.get(t)),u=(t,s,e)=>s.has(t)?l("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,e),c=(t,s,e,r)=>(a(t,s,"write to private field"),r?r.call(t,e):s.set(t,e),e);var i;class o{constructor(){u(this,i);c(this,i,new Map)}subscribe(s,e){h(this,i).has(s)||h(this,i).set(s,[]);const r=h(this,i).get(s);r.push(e),h(this,i).set(s,r)}unsubscribe(s,e){if(!h(this,i).has(s))return!1;const r=h(this,i).get(s).filter(n=>n!==e);return h(this,i).set(s,r),!0}publish(s,e){(h(this,i).get(s)??[]).forEach(n=>n(e))}async publishAsync(s,e){const r=h(this,i).get(s)??[],n=[];r.forEach(b=>n.push(b(e))),await Promise.allSettled(n)}}i=new WeakMap;export{o as P};
