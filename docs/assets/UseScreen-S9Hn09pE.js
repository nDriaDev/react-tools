import{r as a,j as s}from"./index-Qk5VFgQW.js";import{u as g}from"./useSyncExternalStore-r0xa_TO4.js";const u=new Set,S=t=>{const e=a.useRef(),l=a.useRef(!1),d=g(a.useCallback(r=>{const n=()=>{console.log("orientation"),l.current=!0,u.forEach(c=>c())};u.add(r);let i=!1;return u.size===1&&(screen.orientation.onchange=n,window&&"getScreenDetails"in window&&(i=!0,window.getScreenDetails().then(c=>{i&&(c.addEventListener("currentscreenchange",n),t&&c.addEventListener("screenschange",n),e.current=c,r())}).catch(()=>{}))),()=>{u.delete(r),u.size===0&&(e.current&&(e.current.removeEventListener("currentscreenchange",n),t&&e.current.removeEventListener("screenschange",n)),i=!1,screen.orientation.onchange=null)}},[t]),a.useMemo(()=>{let r={currentScreen:{availHeight:screen.availWidth,availWidth:screen.availWidth,height:screen.height,width:screen.width,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,orientation:{angle:screen.orientation.angle,type:screen.orientation.type},availLeft:void 0,availTop:void 0,left:void 0,top:void 0,devicePixelRatio:void 0,isInternal:void 0,isPrimary:void 0,label:void 0},screens:void 0};return()=>{var c,v;const n=Reflect.ownKeys(r.currentScreen);r.currentScreen.isPrimary===void 0&&e.current&&(r={currentScreen:{...r.currentScreen,availLeft:e.current.currentScreen.availLeft,availTop:e.current.currentScreen.availTop,left:e.current.currentScreen.left,top:e.current.currentScreen.top,devicePixelRatio:e.current.currentScreen.devicePixelRatio,isInternal:e.current.currentScreen.isInternal,isPrimary:e.current.currentScreen.isPrimary,label:e.current.currentScreen.label},screens:t&&((c=e.current)!=null&&c.screens)?e.current.screens:void 0});let i=!1;if(l.current){l.current=!1;for(let o=0,f=n.length;o<f;o++)if(n[o]==="orientation"?(r.currentScreen.orientation.angle!==screen.orientation.angle||r.currentScreen.orientation.type!==screen.orientation.type)&&(i=!0):n[o]in screen&&r.currentScreen[n[o]]!==screen[n[o]]&&(i=!0),i){r={currentScreen:{availHeight:screen.availWidth,availWidth:screen.availWidth,height:screen.height,width:screen.width,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,orientation:{angle:screen.orientation.angle,type:screen.orientation.type},availLeft:e.current?e.current.currentScreen.availLeft:void 0,availTop:e.current?e.current.currentScreen.availTop:void 0,left:e.current?e.current.currentScreen.left:void 0,top:e.current?e.current.currentScreen.top:void 0,devicePixelRatio:e.current?e.current.currentScreen.devicePixelRatio:void 0,isInternal:e.current?e.current.currentScreen.isInternal:void 0,isPrimary:e.current?e.current.currentScreen.isPrimary:void 0,label:e.current?e.current.currentScreen.label:void 0},screens:t&&((v=e.current)!=null&&v.screens)?e.current.screens:void 0};break}}return r}},[t])),h=a.useRef(r=>screen.orientation.lock(r)),p=a.useRef(()=>screen.orientation.unlock());return[d,h.current,p.current]},m=()=>{var e;const[t]=S(!0);return s.jsxs("div",{style:{textAlign:"left",padding:"0 1em",maxHeight:300,overflow:"auto",border:"1px solid lightgray"},children:[s.jsx("p",{children:s.jsx("strong",{children:"Current screen:"})}),s.jsx("pre",{children:JSON.stringify(t.currentScreen,null,2)}),s.jsx("p",{children:s.jsx("strong",{children:"Screens:"})}),(e=t.screens)==null?void 0:e.map((l,d)=>s.jsx("pre",{children:l.label},d))]})};export{m as UseScreen};
