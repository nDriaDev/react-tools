import{r as t,j as b}from"./index-gy_8fZHQ.js";import{P as o}from"./PublishSubscribePattern-aUbEeFKT.js";const n=new o,i=s=>{const r=t.useRef(async e=>await n.publish(s,e)),u=t.useRef(new Set),c=t.useRef(e=>{n.subscribe(s,e);const a=()=>n.unsubscribe(s,e);return u.current.add(a),()=>{u.current.delete(a),n.unsubscribe(s,e)}});return t.useEffect(()=>()=>{u.current.forEach(e=>e())},[s]),[c.current,r.current]},l=t.memo(()=>{const[,s]=i("demo"),r=t.useCallback(u=>{s({value:u.target.value})},[s]);return b.jsx("input",{type:"text",onChange:r})}),h=()=>{const[s,r]=t.useState({value:""}),[u]=i("demo");return t.useEffect(()=>{const c=u(e=>{e&&r(e)});return()=>{c()}},[u]),b.jsxs("div",{children:[b.jsxs("p",{children:["Value is: ",s.value]}),b.jsx(l,{})]})};h.displayName="UsePublishSubscribe";export{h as UsePublishSubscribe};
