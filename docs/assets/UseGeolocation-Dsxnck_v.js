import{r as i,j as t}from"./index-27nyValZ.js";import{u as R}from"./useSyncExternalStore-Atv6g5DE.js";const A=({mode:h,locationOptions:d,onError:o})=>{i.useRef();const c=i.useRef({isSupported:!!navigator&&"geolocation"in navigator}),a=i.useRef({isSupported:!!navigator&&"geolocation"in navigator}),p=i.useRef(),l=i.useCallback(e=>{a.current={position:e,isSupported:!0},p.current&&p.current()},[]),u=i.useCallback(e=>{if(o)o(e);else throw e},[o]),m=R(i.useCallback(e=>(navigator&&"geolocation"in navigator?(p.current=e,e()):a.current={isSupported:!1},()=>{p.current=void 0}),[l,u,d,h]),i.useCallback(()=>{var e,s,g,r,n,j,f,b,C,S,k,P,y,w;return(((e=c.current)==null?void 0:e.isSupported)!==((s=c.current)==null?void 0:s.isSupported)||((r=(g=c.current)==null?void 0:g.position)==null?void 0:r.timestamp)!==((j=(n=a.current)==null?void 0:n.position)==null?void 0:j.timestamp)||((b=(f=c.current)==null?void 0:f.position)==null?void 0:b.coords.latitude)!==((S=(C=a.current)==null?void 0:C.position)==null?void 0:S.coords.latitude)||((P=(k=c.current)==null?void 0:k.position)==null?void 0:P.coords.longitude)!==((w=(y=a.current)==null?void 0:y.position)==null?void 0:w.coords.longitude))&&(c.current={...a.current}),c.current},[])),x=i.useCallback(()=>{let e,s;const g=new Promise((r,n)=>{e=r,s=n});if(navigator&&"geolocation"in navigator)navigator.geolocation.getCurrentPosition(r=>{l(r),e()},r=>{u(r),s()},d);else return Promise.resolve();return g},[l,u,d]),v=i.useCallback(()=>{let e,s,g,r=new Promise((n,j)=>{s=n,g=j});return navigator&&"geolocation"in navigator?e=navigator.geolocation.watchPosition(n=>{l(n),s()},n=>{u(n),g()},d):r=Promise.resolve(),r.then(()=>()=>e&&navigator.geolocation.clearWatch(e))},[l,u,d]);return[m,x,v]},E=()=>{var a,p,l,u,m,x,v,e;const[h,d]=i.useState(""),[o,c]=A({mode:"manual",onError(s){d(s.message)}});return t.jsxs("div",{style:{textAlign:"left",width:"fit-content",margin:"0 auto"},children:[h&&t.jsx("p",{style:{color:"red"},children:h}),t.jsx("br",{}),t.jsx("button",{onClick:c,children:"Get Location"}),t.jsx("br",{}),t.jsxs("p",{children:["isSupported: ",o.isSupported?"true":"false"]}),t.jsxs("p",{children:["Timestamp: ",(a=o==null?void 0:o.position)==null?void 0:a.timestamp]}),t.jsx("p",{children:"Coords:"}),t.jsxs("div",{style:{paddingLeft:10,textAlign:"left",width:"fit-content",margin:"0 auto"},children:[t.jsxs("p",{children:["accuracy: ",(p=o.position)==null?void 0:p.coords.accuracy]}),t.jsxs("p",{children:["altitude: ",(l=o.position)==null?void 0:l.coords.altitude]}),t.jsxs("p",{children:["altitudeAccuracy: ",(u=o.position)==null?void 0:u.coords.altitudeAccuracy]}),t.jsxs("p",{children:["heading: ",(m=o.position)==null?void 0:m.coords.heading]}),t.jsxs("p",{children:["latitude: ",(x=o.position)==null?void 0:x.coords.latitude]}),t.jsxs("p",{children:["longitude: ",(v=o.position)==null?void 0:v.coords.longitude]}),t.jsxs("p",{children:["speed: ",(e=o.position)==null?void 0:e.coords.speed]})]})]})};export{E as UseGeolocation};
